<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Explorador del Cuadrado Binomial (C₁·x + C₂·y)²</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        #root {
            width: 100vw;
            height: 100vh;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo } = React;

        // ============================================
        // SVG SQUARE VISUALIZATION COMPONENT
        // ============================================
        function SquareVisualization({ x, y, c1, c2 }) {
            // Calculate dimensions
            const X = c1 * x; // Side of big square
            const Y = c2 * y; // Side of small square
            const totalSide = X + Y; // Total side of the binomial square

            // Calculate scaling factor to fit container
            const containerSize = 500; // Size of SVG viewport
            const scale = useMemo(() => {
                const maxSide = Math.max(totalSide, 20); // Minimum scale
                return (containerSize * 0.8) / maxSide; // 80% of container, with padding
            }, [totalSide]);

            const scaledX = X * scale;
            const scaledY = Y * scale;
            const scaledTotal = totalSide * scale;

            // Center the square in the SVG
            const offsetX = (containerSize - scaledTotal) / 2;
            const offsetY = (containerSize - scaledTotal) / 2;

            // Calculate areas
            const areaSquare1 = Math.pow(X, 2); // (C1·x)²
            const areaRect1 = X * Y; // (C1·x)(C2·y)
            const areaRect2 = X * Y; // (C1·x)(C2·y)
            const areaSquare2 = Math.pow(Y, 2); // (C2·y)²
            const totalArea = Math.pow(totalSide, 2);

            return (
                <div className="w-full h-full flex items-center justify-center bg-gray-50 p-8">
                    <svg
                        width={containerSize}
                        height={containerSize}
                        viewBox={`0 0 ${containerSize} ${containerSize}`}
                        className="border-2 border-gray-300 rounded-lg shadow-lg bg-white"
                    >
                        {/* Grid background (subtle) */}
                        <defs>
                            <pattern id="grid" width="20" height="20" patternUnits="userSpaceOnUse">
                                <path d="M 20 0 L 0 0 0 20" fill="none" stroke="#e5e7eb" strokeWidth="0.5"/>
                            </pattern>
                        </defs>
                        <rect width="100%" height="100%" fill="url(#grid)" />

                        {/* Big Square (C1·x)² - Red */}
                        <rect
                            x={offsetX}
                            y={offsetY}
                            width={scaledX}
                            height={scaledX}
                            fill="#ef4444"
                            stroke="#991b1b"
                            strokeWidth="3"
                            opacity="0.9"
                        />
                        <text
                            x={offsetX + scaledX / 2}
                            y={offsetY + scaledX / 2}
                            textAnchor="middle"
                            dominantBaseline="middle"
                            fontSize="28"
                            fontWeight="bold"
                            fill="#ffffff"
                            className="select-none"
                        >
                            {areaSquare1.toFixed(2)}
                        </text>

                        {/* Rectangle 1 (C1·x)(C2·y) - Yellow - Top */}
                        <rect
                            x={offsetX + scaledX}
                            y={offsetY}
                            width={scaledY}
                            height={scaledX}
                            fill="#fbbf24"
                            stroke="#d97706"
                            strokeWidth="3"
                            opacity="0.9"
                        />
                        <text
                            x={offsetX + scaledX + scaledY / 2}
                            y={offsetY + scaledX / 2}
                            textAnchor="middle"
                            dominantBaseline="middle"
                            fontSize="24"
                            fontWeight="bold"
                            fill="#78350f"
                            className="select-none"
                        >
                            {areaRect1.toFixed(2)}
                        </text>

                        {/* Rectangle 2 (C1·x)(C2·y) - Yellow - Left */}
                        <rect
                            x={offsetX}
                            y={offsetY + scaledX}
                            width={scaledX}
                            height={scaledY}
                            fill="#fbbf24"
                            stroke="#d97706"
                            strokeWidth="3"
                            opacity="0.9"
                        />
                        <text
                            x={offsetX + scaledX / 2}
                            y={offsetY + scaledX + scaledY / 2}
                            textAnchor="middle"
                            dominantBaseline="middle"
                            fontSize="24"
                            fontWeight="bold"
                            fill="#78350f"
                            className="select-none"
                        >
                            {areaRect2.toFixed(2)}
                        </text>

                        {/* Small Square (C2·y)² - Blue */}
                        <rect
                            x={offsetX + scaledX}
                            y={offsetY + scaledX}
                            width={scaledY}
                            height={scaledY}
                            fill="#3b82f6"
                            stroke="#1e40af"
                            strokeWidth="3"
                            opacity="0.9"
                        />
                        <text
                            x={offsetX + scaledX + scaledY / 2}
                            y={offsetY + scaledX + scaledY / 2}
                            textAnchor="middle"
                            dominantBaseline="middle"
                            fontSize="28"
                            fontWeight="bold"
                            fill="#ffffff"
                            className="select-none"
                        >
                            {areaSquare2.toFixed(2)}
                        </text>
                    </svg>
                </div>
            );
        }

        // ============================================
        // MAIN APP COMPONENT
        // ============================================
        function App() {
            const [x, setX] = useState(3.0);
            const [y, setY] = useState(2.0);
            const [c1, setC1] = useState(2);
            const [c2, setC2] = useState(1);

            // Calculate values
            const X = c1 * x;
            const Y = c2 * y;

            // Calculate coefficients and areas
            const calculations = useMemo(() => {
                const coeff1 = Math.pow(c1, 2); // C1²
                const coeff2 = 2 * c1 * c2; // 2·C1·C2
                const coeff3 = Math.pow(c2, 2); // C2²

                const areaSquare1 = Math.pow(X, 2); // (C1·x)²
                const areaRect1 = X * Y; // (C1·x)(C2·y)
                const areaRect2 = X * Y; // (C1·x)(C2·y)
                const areaSquare2 = Math.pow(Y, 2); // (C2·y)²
                const totalArea = Math.pow(X + Y, 2);

                return {
                    coeff1, coeff2, coeff3,
                    areaSquare1, areaRect1, areaRect2, areaSquare2, totalArea
                };
            }, [c1, c2, X, Y]);

            return (
                <div className="flex h-screen bg-gray-900 text-white">
                    {/* Left Panel - Controls */}
                    <aside className="w-96 bg-gray-800 border-r border-gray-700 p-6 overflow-y-auto">
                        <h1 className="text-2xl font-bold mb-4 text-yellow-400">
                            Cuadrado Binomial
                        </h1>
                        <div className="text-sm text-gray-400 mb-6">
                            (C₁·x + C₂·y)²
                        </div>

                        {/* Symbolic Formula */}
                        <div className="mb-6 p-4 bg-gray-900 rounded-lg border border-gray-700">
                            <div className="text-sm text-gray-300 mb-2">Fórmula Simbólica:</div>
                            <div className="text-lg font-mono text-yellow-400 text-center">
                                (C₁·x + C₂·y)²
                            </div>
                        </div>

                        {/* Expanded Numerical Formula */}
                        <div className="mb-6 p-4 bg-gray-900 rounded-lg border border-gray-700">
                            <div className="text-sm text-gray-300 mb-2">Fórmula Expandida Numérica:</div>
                            <div className="text-base font-mono text-yellow-400 space-y-1">
                                <div className="text-center">
                                    ({calculations.coeff1})x² + ({calculations.coeff2})xy + ({calculations.coeff3})y²
                                </div>
                            </div>
                        </div>

                        {/* Slider for 'x' */}
                        <div className="mb-6">
                            <label className="block text-sm font-semibold mb-2 text-gray-300">
                                Variable 'x': <span className="text-yellow-400">{x.toFixed(2)}</span>
                            </label>
                            <input
                                type="range"
                                min="1"
                                max="10"
                                step="0.1"
                                value={x}
                                onChange={(e) => setX(parseFloat(e.target.value))}
                                className="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-yellow-500"
                            />
                            <div className="flex justify-between text-xs text-gray-400 mt-1">
                                <span>1</span>
                                <span>10</span>
                            </div>
                        </div>

                        {/* Slider for 'y' */}
                        <div className="mb-6">
                            <label className="block text-sm font-semibold mb-2 text-gray-300">
                                Variable 'y': <span className="text-yellow-400">{y.toFixed(2)}</span>
                            </label>
                            <input
                                type="range"
                                min="1"
                                max="10"
                                step="0.1"
                                value={y}
                                onChange={(e) => setY(parseFloat(e.target.value))}
                                className="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-yellow-500"
                            />
                            <div className="flex justify-between text-xs text-gray-400 mt-1">
                                <span>1</span>
                                <span>10</span>
                            </div>
                        </div>

                        {/* Slider for 'C1' */}
                        <div className="mb-6">
                            <label className="block text-sm font-semibold mb-2 text-gray-300">
                                Coeficiente C₁: <span className="text-yellow-400">{c1}</span>
                            </label>
                            <input
                                type="range"
                                min="1"
                                max="10"
                                step="1"
                                value={c1}
                                onChange={(e) => setC1(parseInt(e.target.value))}
                                className="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-red-500"
                            />
                            <div className="flex justify-between text-xs text-gray-400 mt-1">
                                <span>1</span>
                                <span>10</span>
                            </div>
                            <div className="text-xs text-gray-500 mt-1">
                                C₁·x = {X.toFixed(2)}
                            </div>
                        </div>

                        {/* Slider for 'C2' */}
                        <div className="mb-6">
                            <label className="block text-sm font-semibold mb-2 text-gray-300">
                                Coeficiente C₂: <span className="text-yellow-400">{c2}</span>
                            </label>
                            <input
                                type="range"
                                min="1"
                                max="10"
                                step="1"
                                value={c2}
                                onChange={(e) => setC2(parseInt(e.target.value))}
                                className="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-500"
                            />
                            <div className="flex justify-between text-xs text-gray-400 mt-1">
                                <span>1</span>
                                <span>10</span>
                            </div>
                            <div className="text-xs text-gray-500 mt-1">
                                C₂·y = {Y.toFixed(2)}
                            </div>
                        </div>

                        {/* Area Table */}
                        <div className="mb-6">
                            <h2 className="text-lg font-semibold mb-3 text-yellow-400">Tabla de Áreas</h2>
                            <div className="bg-gray-900 rounded-lg border border-gray-700 overflow-hidden">
                                <table className="w-full text-sm">
                                    <thead className="bg-gray-800">
                                        <tr>
                                            <th className="px-3 py-2 text-left text-gray-300">Componente</th>
                                            <th className="px-3 py-2 text-left text-gray-300">Expresión Algebraica</th>
                                            <th className="px-3 py-2 text-right text-gray-300">Área Numérica</th>
                                        </tr>
                                    </thead>
                                    <tbody className="text-gray-400">
                                        <tr className="border-t border-gray-700">
                                            <td className="px-3 py-2">
                                                <div className="flex items-center gap-2">
                                                    <div className="w-4 h-4 rounded bg-red-500"></div>
                                                    <span>Cuadrado 1</span>
                                                </div>
                                            </td>
                                            <td className="px-3 py-2 font-mono text-xs">(C₁·x)²</td>
                                            <td className="px-3 py-2 text-right text-yellow-400 font-bold">
                                                {calculations.areaSquare1.toFixed(3)}
                                            </td>
                                        </tr>
                                        <tr className="border-t border-gray-700">
                                            <td className="px-3 py-2">
                                                <div className="flex items-center gap-2">
                                                    <div className="w-4 h-4 rounded bg-yellow-500"></div>
                                                    <span>Rectángulo 1</span>
                                                </div>
                                            </td>
                                            <td className="px-3 py-2 font-mono text-xs">(C₁·x)(C₂·y)</td>
                                            <td className="px-3 py-2 text-right text-yellow-400 font-bold">
                                                {calculations.areaRect1.toFixed(3)}
                                            </td>
                                        </tr>
                                        <tr className="border-t border-gray-700">
                                            <td className="px-3 py-2">
                                                <div className="flex items-center gap-2">
                                                    <div className="w-4 h-4 rounded bg-yellow-500"></div>
                                                    <span>Rectángulo 2</span>
                                                </div>
                                            </td>
                                            <td className="px-3 py-2 font-mono text-xs">(C₁·x)(C₂·y)</td>
                                            <td className="px-3 py-2 text-right text-yellow-400 font-bold">
                                                {calculations.areaRect2.toFixed(3)}
                                            </td>
                                        </tr>
                                        <tr className="border-t border-gray-700">
                                            <td className="px-3 py-2">
                                                <div className="flex items-center gap-2">
                                                    <div className="w-4 h-4 rounded bg-blue-500"></div>
                                                    <span>Cuadrado 2</span>
                                                </div>
                                            </td>
                                            <td className="px-3 py-2 font-mono text-xs">(C₂·y)²</td>
                                            <td className="px-3 py-2 text-right text-yellow-400 font-bold">
                                                {calculations.areaSquare2.toFixed(3)}
                                            </td>
                                        </tr>
                                        <tr className="border-t-2 border-yellow-400 bg-gray-800">
                                            <td colSpan="2" className="px-3 py-2 font-semibold text-gray-200">
                                                Total (C₁·x + C₂·y)²
                                            </td>
                                            <td className="px-3 py-2 text-right text-yellow-400 font-bold text-base">
                                                {calculations.totalArea.toFixed(3)}
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        {/* Legend */}
                        <div className="text-xs text-gray-400 space-y-2">
                            <p className="font-semibold text-gray-300 mb-2">Leyenda de Colores (Estilo Montessori):</p>
                            <div className="flex items-center gap-2">
                                <div className="w-3 h-3 rounded bg-red-500"></div>
                                <span>Cuadrado 1: (C₁·x)²</span>
                            </div>
                            <div className="flex items-center gap-2">
                                <div className="w-3 h-3 rounded bg-yellow-500"></div>
                                <span>Rectángulos: (C₁·x)(C₂·y)</span>
                            </div>
                            <div className="flex items-center gap-2">
                                <div className="w-3 h-3 rounded bg-blue-500"></div>
                                <span>Cuadrado 2: (C₂·y)²</span>
                            </div>
                        </div>
                    </aside>

                    {/* Right Panel - 2D Visualization */}
                    <main className="flex-1 relative">
                        <SquareVisualization x={x} y={y} c1={c1} c2={c2} />
                    </main>
                </div>
            );
        }

        // Render app
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>

